# Memory Manager Plugin - Hooks æµ‹è¯•æŒ‡å—

**æµ‹è¯•é˜¶æ®µ**: Phase 5
**åˆ›å»ºæ—¥æœŸ**: 2026-01-30
**æµ‹è¯•ç±»å‹**: æ‰‹åŠ¨æµ‹è¯•ï¼ˆéœ€è¦ Claude Code CLI ç¯å¢ƒï¼‰

---

## æµ‹è¯•æ¦‚è¿°

Hooks æ˜¯ Claude Code æ’ä»¶ç³»ç»Ÿçš„äº‹ä»¶é©±åŠ¨æœºåˆ¶ï¼Œåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶è‡ªåŠ¨è§¦å‘ã€‚Memory Manager æ’ä»¶å®šä¹‰äº† 4 ä¸ª hooksï¼Œéœ€è¦åœ¨å®é™…çš„ Claude Code ç¯å¢ƒä¸­æµ‹è¯•ã€‚

### Hooks é…ç½®éªŒè¯ç»“æœ âœ…

| Hook | äº‹ä»¶ç±»å‹ | çŠ¶æ€ | è¶…æ—¶ | é…ç½® |
|------|---------|------|------|------|
| load-recent-memory | SessionStart | âœ… å·²å¯ç”¨ | 10s | å®Œæ•´ |
| intelligent-compression | PreCompact | âœ… å·²å¯ç”¨ | 30s | å®Œæ•´ |
| auto-save-important-operations | PostToolUse | âœ… å·²å¯ç”¨ | 5s | å®Œæ•´ + æ¡ä»¶ |
| session-end-cleanup | Stop | âœ… å·²å¯ç”¨ | 15s | å®Œæ•´ |

**é…ç½®çŠ¶æ€**: âœ… æ‰€æœ‰é…ç½®æœ‰æ•ˆï¼ŒJSON æ ¼å¼æ­£ç¡®

---

## Hook #1: SessionStart - load-recent-memory

### åŠŸèƒ½æè¿°
ä¼šè¯å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½æœ€è¿‘çš„è®°å¿†ï¼Œæä¾›ä¸Šä¸‹æ–‡è¿ç»­æ€§ã€‚

### è§¦å‘æ¡ä»¶
- å¯åŠ¨æ–°çš„ Claude Code ä¼šè¯

### æµ‹è¯•æ­¥éª¤

#### å‡†å¤‡å·¥ä½œ
1. ç¡®ä¿æœ‰æœ€è¿‘çš„ä¼šè¯æ•°æ®ï¼ˆ<7å¤©ï¼‰
2. ç¡®ä¿ `.claude/memory/active-tasks/` ç›®å½•å­˜åœ¨
3. ç¡®ä¿è‡³å°‘æœ‰ä¸€ä¸ªæ´»è·ƒä»»åŠ¡

#### æµ‹è¯•ç”¨ä¾‹ TC5.1.1: åŠ è½½æœ€è¿‘ä¼šè¯
**æ­¥éª¤**:
1. é€€å‡ºå½“å‰ Claude Code ä¼šè¯
2. é‡æ–°å¯åŠ¨ Claude Code
3. è§‚å¯Ÿå¯åŠ¨æ—¶çš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è‡ªåŠ¨è§¦å‘
- âœ… æ£€æµ‹åˆ°æœ€è¿‘çš„ä¼šè¯ï¼ˆ<7å¤©ï¼‰
- âœ… æ˜¾ç¤ºåŠ è½½çš„è®°å¿†æ‘˜è¦
- âœ… è¾“å‡ºæ ¼å¼ç±»ä¼¼: `ğŸ“š Loaded memory from task-001 (2026-01-28): Working on authentication feature`
- âœ… åŠ è½½æ—¶é—´ <5ç§’

#### æµ‹è¯•ç”¨ä¾‹ TC5.1.2: æ— æœ€è¿‘ä¼šè¯
**æ­¥éª¤**:
1. æ¸…ç©ºæˆ–å½’æ¡£æ‰€æœ‰æœ€è¿‘çš„ä»»åŠ¡
2. é‡æ–°å¯åŠ¨ Claude Code
3. è§‚å¯Ÿå¯åŠ¨æ—¶çš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è§¦å‘ä½†é™é»˜è·³è¿‡
- âœ… æ— è¾“å‡ºï¼ˆsilent operationï¼‰
- âœ… ä¸å½±å“ä¼šè¯å¯åŠ¨

#### æµ‹è¯•ç”¨ä¾‹ TC5.1.3: é¦–æ¬¡ä½¿ç”¨
**æ­¥éª¤**:
1. åˆ é™¤ `.claude/memory/` ç›®å½•
2. å¯åŠ¨ Claude Code
3. è§‚å¯Ÿå¯åŠ¨æ—¶çš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è§¦å‘ä½†é™é»˜è·³è¿‡
- âœ… æ— é”™è¯¯ä¿¡æ¯
- âœ… æ­£å¸¸å¯åŠ¨ä¼šè¯

### éªŒè¯æ–¹æ³•
```bash
# æ£€æŸ¥æ˜¯å¦åŠ è½½äº†è®°å¿†
# åœ¨ä¼šè¯ä¸­è¯¢é—®: "ä½ è®°å¾—æˆ‘ä»¬ä¸Šæ¬¡åœ¨åšä»€ä¹ˆå—?"
# å¦‚æœ hook å·¥ä½œæ­£å¸¸ï¼ŒClaude åº”è¯¥èƒ½å›å¿†èµ·æœ€è¿‘çš„å·¥ä½œå†…å®¹
```

### å¸¸è§é—®é¢˜
- **é—®é¢˜**: Hook æ²¡æœ‰è§¦å‘
  - **æ’æŸ¥**: æ£€æŸ¥ hooks.json ä¸­ enabled æ˜¯å¦ä¸º true
  - **æ’æŸ¥**: æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…

- **é—®é¢˜**: åŠ è½½æ—¶é—´è¿‡é•¿
  - **æ’æŸ¥**: æ£€æŸ¥è®°å¿†æ•°æ®å¤§å°
  - **æ’æŸ¥**: è€ƒè™‘å‡å°‘åŠ è½½çš„è®°å¿†é‡

---

## Hook #2: PreCompact - intelligent-compression

### åŠŸèƒ½æè¿°
å½“ä¸Šä¸‹æ–‡è¶…è¿‡é˜ˆå€¼ï¼ˆ>128K tokens æˆ– >60%ï¼‰æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡Œæ™ºèƒ½å‹ç¼©ã€‚

### è§¦å‘æ¡ä»¶
- ä¸Šä¸‹æ–‡å¤§å° > 128K tokens
- æˆ–ä¸Šä¸‹æ–‡ä½¿ç”¨ç‡ > 60%

### æµ‹è¯•æ­¥éª¤

#### å‡†å¤‡å·¥ä½œ
1. å¯åŠ¨ä¸€ä¸ªæ–°ä¼šè¯
2. æ‰§è¡Œå¤§é‡æ“ä½œä»¥å¢åŠ ä¸Šä¸‹æ–‡
3. è¯»å–å¤šä¸ªå¤§æ–‡ä»¶

#### æµ‹è¯•ç”¨ä¾‹ TC5.2.1: è‡ªåŠ¨å‹ç¼©è§¦å‘
**æ­¥éª¤**:
1. è¯»å–å¤šä¸ªå¤§æ–‡ä»¶ï¼ˆæ¯ä¸ª >10K tokensï¼‰
   ```bash
   # ç¤ºä¾‹
   cat large-file-1.txt
   cat large-file-2.txt
   cat large-file-3.txt
   ```
2. ç»§ç»­æ“ä½œç›´åˆ°ä¸Šä¸‹æ–‡è¶…è¿‡é˜ˆå€¼
3. è§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨è§¦å‘å‹ç¼©

**é¢„æœŸç»“æœ**:
- âœ… ä¸Šä¸‹æ–‡è¾¾åˆ°é˜ˆå€¼æ—¶è‡ªåŠ¨è§¦å‘
- âœ… è°ƒç”¨ context-analyzer agent
- âœ… æ˜¾ç¤ºå‹ç¼©å‰åå¯¹æ¯”
- âœ… åŸå§‹ä¸Šä¸‹æ–‡ä¿å­˜åˆ°æ•°æ®åº“
- âœ… è¾“å‡ºæ ¼å¼ç±»ä¼¼:
  ```
  ğŸ—œï¸ Context compressed: 128K â†’ 52K tokens (60% reduction)
  ğŸ’¾ Original saved to: .claude/memory/context-2026-01-30-001.json
  ğŸ“Š Compressed: 15 files, 3 web pages, 2 conversations
  ```
- âœ… å‹ç¼©æ—¶é—´ <30ç§’

#### æµ‹è¯•ç”¨ä¾‹ TC5.2.2: å‹ç¼©ç­–ç•¥éªŒè¯
**æ­¥éª¤**:
1. è§¦å‘å‹ç¼©åï¼Œæ£€æŸ¥å‹ç¼©æ•ˆæœ
2. éªŒè¯æœ€è¿‘ 30% çš„ä¸Šä¸‹æ–‡æ˜¯å¦ä¿ç•™
3. éªŒè¯æ–‡ä»¶å†…å®¹æ˜¯å¦è¢«æ›¿æ¢ä¸ºæŒ‡é’ˆ

**é¢„æœŸç»“æœ**:
- âœ… æœ€è¿‘ 30% ä¸Šä¸‹æ–‡å®Œæ•´ä¿ç•™
- âœ… æ–‡ä»¶å†…å®¹å‹ç¼©ä¸ºè·¯å¾„ + æ‘˜è¦
- âœ… ç½‘é¡µå†…å®¹å‹ç¼©ä¸º URL + æ‘˜è¦
- âœ… é‡å¤ä¿¡æ¯è¢«å»é™¤
- âœ… å…³é”®å†³ç­–å’Œç»“è®ºä¿ç•™

#### æµ‹è¯•ç”¨ä¾‹ TC5.2.3: å‹ç¼©åæ¢å¤
**æ­¥éª¤**:
1. å‹ç¼©åï¼Œæ£€æŸ¥æ•°æ®åº“ä¸­çš„ä¿å­˜è®°å½•
2. éªŒè¯å¯ä»¥ä»æ•°æ®åº“æ¢å¤åŸå§‹ä¸Šä¸‹æ–‡

**é¢„æœŸç»“æœ**:
- âœ… åŸå§‹ä¸Šä¸‹æ–‡ä¿å­˜åœ¨ `context_history` è¡¨
- âœ… åˆ›å»ºäº† compression_pointer
- âœ… å¯ä»¥é€šè¿‡ pointer æ¢å¤åŸå§‹å†…å®¹

### éªŒè¯æ–¹æ³•
```bash
# æ£€æŸ¥å‹ç¼©ç»Ÿè®¡
sqlite3 .claude/memory/long-term/knowledge.db \
  "SELECT * FROM compression_stats ORDER BY created_at DESC LIMIT 1;"

# æ£€æŸ¥ä¿å­˜çš„ä¸Šä¸‹æ–‡
ls -lh .claude/memory/active-tasks/*/sessions/
```

### å¸¸è§é—®é¢˜
- **é—®é¢˜**: å‹ç¼©æ²¡æœ‰è§¦å‘
  - **æ’æŸ¥**: æ£€æŸ¥ä¸Šä¸‹æ–‡å¤§å°æ˜¯å¦çœŸçš„è¶…è¿‡é˜ˆå€¼
  - **æ’æŸ¥**: æ£€æŸ¥ hook æ˜¯å¦å¯ç”¨

- **é—®é¢˜**: å‹ç¼©åä¿¡æ¯ä¸¢å¤±
  - **æ’æŸ¥**: æ£€æŸ¥å‹ç¼©ç­–ç•¥æ˜¯å¦è¿‡äºæ¿€è¿›
  - **æ’æŸ¥**: éªŒè¯å…³é”®ä¿¡æ¯æ˜¯å¦åœ¨ä¿ç•™çš„ 30% ä¸­

---

## Hook #3: PostToolUse - auto-save-important-operations

### åŠŸèƒ½æè¿°
åœ¨é‡è¦å·¥å…·æ“ä½œåè‡ªåŠ¨ä¿å­˜è®°å¿†ã€‚

### è§¦å‘æ¡ä»¶
- Write å·¥å…·è¢«ä½¿ç”¨
- Edit å·¥å…·è¢«ä½¿ç”¨
- Bash å·¥å…·æ‰§è¡Œç‰¹å®šå‘½ä»¤ï¼ˆgit commit, git push, npm test, pytest, cargo testï¼‰

### æµ‹è¯•æ­¥éª¤

#### å‡†å¤‡å·¥ä½œ
1. å¯åŠ¨ä¸€ä¸ªæ–°ä¼šè¯
2. ç¡®ä¿æœ‰æ´»è·ƒçš„ä»»åŠ¡

#### æµ‹è¯•ç”¨ä¾‹ TC5.3.1: Write æ“ä½œè‡ªåŠ¨ä¿å­˜
**æ­¥éª¤**:
1. åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶
   ```
   # åœ¨ Claude Code ä¸­
   ç”¨æˆ·: "åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ test.txtï¼Œå†…å®¹æ˜¯ 'Hello World'"
   ```
2. è§‚å¯Ÿæ“ä½œåçš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è‡ªåŠ¨è§¦å‘
- âœ… æ£€æµ‹åˆ° Write æ“ä½œ
- âœ… è‡ªåŠ¨ä¿å­˜åˆ°è®°å¿†
- âœ… æ˜¾ç¤ºç¡®è®¤ä¿¡æ¯: `ğŸ’¾ Auto-saved: Write operation on test.txt`
- âœ… ä¿å­˜æ—¶é—´ <2ç§’

#### æµ‹è¯•ç”¨ä¾‹ TC5.3.2: Edit æ“ä½œè‡ªåŠ¨ä¿å­˜
**æ­¥éª¤**:
1. ä¿®æ”¹ä¸€ä¸ªç°æœ‰æ–‡ä»¶
2. è§‚å¯Ÿæ“ä½œåçš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è‡ªåŠ¨è§¦å‘
- âœ… è‡ªåŠ¨ä¿å­˜ä¿®æ”¹
- âœ… æ˜¾ç¤ºç¡®è®¤ä¿¡æ¯

#### æµ‹è¯•ç”¨ä¾‹ TC5.3.3: Git commit è‡ªåŠ¨ä¿å­˜
**æ­¥éª¤**:
1. æ‰§è¡Œ git commit
   ```bash
   git add .
   git commit -m "Test commit"
   ```
2. è§‚å¯Ÿæ“ä½œåçš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è‡ªåŠ¨è§¦å‘
- âœ… ä¿å­˜ commit ä¿¡æ¯
- âœ… æ˜¾ç¤ºç¡®è®¤ä¿¡æ¯

#### æµ‹è¯•ç”¨ä¾‹ TC5.3.4: çç¢æ“ä½œä¸ä¿å­˜
**æ­¥éª¤**:
1. æ‰§è¡Œçç¢å‘½ä»¤
   ```bash
   ls -la
   cat README.md
   echo "test"
   ```
2. è§‚å¯Ÿæ˜¯å¦è§¦å‘ä¿å­˜

**é¢„æœŸç»“æœ**:
- âœ… Hook ä¸è§¦å‘ï¼ˆæˆ–è§¦å‘ä½†è·³è¿‡ï¼‰
- âœ… æ— è¾“å‡ºï¼ˆsilentï¼‰
- âœ… ä¸ä¿å­˜çç¢æ“ä½œ

#### æµ‹è¯•ç”¨ä¾‹ TC5.3.5: æ‰¹é‡æ“ä½œé˜²é‡å¤ä¿å­˜
**æ­¥éª¤**:
1. åœ¨ 2 åˆ†é’Ÿå†…æ‰§è¡Œå¤šä¸ª Write æ“ä½œ
2. è§‚å¯Ÿä¿å­˜è¡Œä¸º

**é¢„æœŸç»“æœ**:
- âœ… ä¸ä¼šä¸ºæ¯ä¸ªæ“ä½œéƒ½ä¿å­˜
- âœ… æ‰¹é‡ä¿å­˜æˆ–è·³è¿‡é‡å¤ä¿å­˜
- âœ… é¿å…è¿‡åº¦ä¿å­˜

### éªŒè¯æ–¹æ³•
```bash
# æ£€æŸ¥ä¿å­˜çš„ä¼šè¯æ•°æ®
sqlite3 .claude/memory/long-term/knowledge.db \
  "SELECT COUNT(*) FROM context_history WHERE created_at > datetime('now', '-5 minutes');"

# æ£€æŸ¥ä¼šè¯æ–‡ä»¶
ls -lt .claude/memory/active-tasks/*/sessions/ | head -5
```

### å¸¸è§é—®é¢˜
- **é—®é¢˜**: æ‰€æœ‰æ“ä½œéƒ½è¢«ä¿å­˜
  - **æ’æŸ¥**: æ£€æŸ¥çç¢æ“ä½œè¿‡æ»¤é€»è¾‘
  - **æ’æŸ¥**: æ£€æŸ¥æ‰¹é‡ä¿å­˜æœºåˆ¶

- **é—®é¢˜**: é‡è¦æ“ä½œæ²¡æœ‰ä¿å­˜
  - **æ’æŸ¥**: æ£€æŸ¥ condition é…ç½®
  - **æ’æŸ¥**: æ£€æŸ¥å·¥å…·åç§°åŒ¹é…

---

## Hook #4: Stop - session-end-cleanup

### åŠŸèƒ½æè¿°
ä¼šè¯ç»“æŸæ—¶è‡ªåŠ¨ä¿å­˜è®°å¿†å¹¶æ•´ç†ã€‚

### è§¦å‘æ¡ä»¶
- Claude Code ä¼šè¯ç»“æŸï¼ˆç”¨æˆ·é€€å‡ºï¼‰

### æµ‹è¯•æ­¥éª¤

#### å‡†å¤‡å·¥ä½œ
1. è¿›è¡Œä¸€äº›æœ‰æ„ä¹‰çš„æ“ä½œ
2. åˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶
3. æ‰§è¡Œä¸€äº›å‘½ä»¤

#### æµ‹è¯•ç”¨ä¾‹ TC5.4.1: æ­£å¸¸ä¼šè¯ç»“æŸ
**æ­¥éª¤**:
1. è¿›è¡Œä¸€äº›æ“ä½œ
2. é€€å‡º Claude Codeï¼ˆCtrl+D æˆ– exitï¼‰
3. è§‚å¯Ÿé€€å‡ºå‰çš„è¾“å‡º

**é¢„æœŸç»“æœ**:
- âœ… Hook è‡ªåŠ¨è§¦å‘
- âœ… ä¿å­˜å½“å‰ä¼šè¯
- âœ… è°ƒç”¨ memory-organizer æ•´ç†
- âœ… æ˜¾ç¤ºä¼šè¯æ€»ç»“:
  ```
  ğŸ“Š Session Summary
  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â±ï¸  Duration: 45 minutes
  ğŸ’¬ Messages: 23 (12 user, 11 assistant)
  ğŸ”§ Operations: 8 (5 writes, 2 edits, 1 git commit)
  ğŸ’¾ Memory saved: .claude/memory/active-tasks/task-001/
  ğŸ“¦ Size: 45K tokens

  âœ… Task: Implement authentication feature
  ğŸ“ Progress: JWT auth completed, tests passing

  ğŸ’¡ Suggestions:
     â€¢ Consider archiving this task (use /memory:archive)
     â€¢ Review and organize memory (use /memory:organize)
  ```
- âœ… å¤„ç†æ—¶é—´ <15ç§’

#### æµ‹è¯•ç”¨ä¾‹ TC5.4.2: ä»»åŠ¡å®Œæˆå»ºè®®å½’æ¡£
**æ­¥éª¤**:
1. å®Œæˆä¸€ä¸ªä»»åŠ¡çš„æ‰€æœ‰å·¥ä½œ
2. é€€å‡ºä¼šè¯
3. è§‚å¯Ÿæ˜¯å¦å»ºè®®å½’æ¡£

**é¢„æœŸç»“æœ**:
- âœ… æ£€æµ‹åˆ°ä»»åŠ¡å¯èƒ½å®Œæˆ
- âœ… å»ºè®®å½’æ¡£: `ğŸ’¡ Tip: Task looks complete. Consider archiving with /memory:archive task-001`

#### æµ‹è¯•ç”¨ä¾‹ TC5.4.3: è®°å¿†è¿‡å¤§å»ºè®®æ•´ç†
**æ­¥éª¤**:
1. ç§¯ç´¯å¤§é‡è®°å¿†ï¼ˆ>100K tokensï¼‰
2. é€€å‡ºä¼šè¯
3. è§‚å¯Ÿæ˜¯å¦å»ºè®®æ•´ç†

**é¢„æœŸç»“æœ**:
- âœ… æ£€æµ‹åˆ°è®°å¿†è¿‡å¤§
- âœ… å»ºè®®æ•´ç†: `ğŸ’¡ Memory is growing large, consider organizing`

### éªŒè¯æ–¹æ³•
```bash
# é‡æ–°å¯åŠ¨ä¼šè¯åæ£€æŸ¥
# 1. æ£€æŸ¥ä¼šè¯æ˜¯å¦ä¿å­˜
sqlite3 .claude/memory/long-term/knowledge.db \
  "SELECT * FROM tasks ORDER BY last_accessed DESC LIMIT 1;"

# 2. æ£€æŸ¥æ˜¯å¦æ‰§è¡Œäº†æ•´ç†
sqlite3 .claude/memory/long-term/knowledge.db \
  "SELECT COUNT(*) FROM long_term_memories;"
```

### å¸¸è§é—®é¢˜
- **é—®é¢˜**: ä¼šè¯ç»“æŸæ—¶æ²¡æœ‰ä¿å­˜
  - **æ’æŸ¥**: æ£€æŸ¥ hook æ˜¯å¦å¯ç”¨
  - **æ’æŸ¥**: æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—

- **é—®é¢˜**: æ•´ç†æ—¶é—´è¿‡é•¿
  - **æ’æŸ¥**: æ£€æŸ¥è®°å¿†æ•°æ®é‡
  - **æ’æŸ¥**: è€ƒè™‘ä¼˜åŒ–æ•´ç†ç®—æ³•

---

## é›†æˆæµ‹è¯•åœºæ™¯

### åœºæ™¯ 1: å®Œæ•´å·¥ä½œæµ
**ç›®æ ‡**: æµ‹è¯•æ‰€æœ‰ hooks åœ¨å®é™…å·¥ä½œæµä¸­çš„åä½œ

**æ­¥éª¤**:
1. å¯åŠ¨ Claude Codeï¼ˆè§¦å‘ SessionStart hookï¼‰
2. åˆ›å»ºå’Œä¿®æ”¹æ–‡ä»¶ï¼ˆè§¦å‘ PostToolUse hookï¼‰
3. ç»§ç»­å·¥ä½œç›´åˆ°ä¸Šä¸‹æ–‡å¢é•¿ï¼ˆè§¦å‘ PreCompact hookï¼‰
4. é€€å‡ºä¼šè¯ï¼ˆè§¦å‘ Stop hookï¼‰

**é¢„æœŸç»“æœ**:
- âœ… æ‰€æœ‰ hooks æŒ‰é¢„æœŸè§¦å‘
- âœ… è®°å¿†æ­£ç¡®ä¿å­˜å’Œæ•´ç†
- âœ… ä¸Šä¸‹æ–‡è‡ªåŠ¨å‹ç¼©
- âœ… ä¼šè¯æ€»ç»“å‡†ç¡®

### åœºæ™¯ 2: é•¿æ—¶é—´ä¼šè¯
**ç›®æ ‡**: æµ‹è¯• hooks åœ¨é•¿æ—¶é—´ä¼šè¯ä¸­çš„ç¨³å®šæ€§

**æ­¥éª¤**:
1. å¯åŠ¨ä¼šè¯å¹¶å·¥ä½œ 2+ å°æ—¶
2. æ‰§è¡Œå¤§é‡æ“ä½œï¼ˆ>50 æ¬¡å·¥å…·è°ƒç”¨ï¼‰
3. è§‚å¯Ÿ hooks è¡Œä¸º

**é¢„æœŸç»“æœ**:
- âœ… PostToolUse hook ä¸ä¼šè¿‡åº¦ä¿å­˜
- âœ… PreCompact hook å¯èƒ½è§¦å‘å¤šæ¬¡
- âœ… æ‰€æœ‰ hooks ç¨³å®šè¿è¡Œ
- âœ… æ— æ€§èƒ½é—®é¢˜

### åœºæ™¯ 3: é”™è¯¯æ¢å¤
**ç›®æ ‡**: æµ‹è¯• hooks çš„é”™è¯¯å¤„ç†

**æ­¥éª¤**:
1. æ¨¡æ‹Ÿå„ç§é”™è¯¯æƒ…å†µ
   - æ•°æ®åº“é”å®š
   - ç£ç›˜ç©ºé—´ä¸è¶³
   - æƒé™é—®é¢˜
2. è§‚å¯Ÿ hooks å¦‚ä½•å¤„ç†

**é¢„æœŸç»“æœ**:
- âœ… Hooks ä¸ä¼šå¯¼è‡´ä¼šè¯å´©æºƒ
- âœ… æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯ä¿¡æ¯
- âœ… å¯ä»¥ä¼˜é›…é™çº§

---

## æ€§èƒ½åŸºå‡†

| Hook | é¢„æœŸæ‰§è¡Œæ—¶é—´ | æœ€å¤§è¶…æ—¶ | å¤‡æ³¨ |
|------|------------|---------|------|
| SessionStart | <5ç§’ | 10ç§’ | åŠ è½½è®°å¿† |
| PreCompact | <30ç§’ | 30ç§’ | åˆ†æå’Œå‹ç¼© |
| PostToolUse | <2ç§’ | 5ç§’ | å¿«é€Ÿä¿å­˜ |
| Stop | <15ç§’ | 15ç§’ | ä¿å­˜å’Œæ•´ç† |

---

## æµ‹è¯•æ£€æŸ¥æ¸…å•

### å‡†å¤‡é˜¶æ®µ
- [ ] æ’ä»¶å·²æ­£ç¡®å®‰è£…
- [ ] hooks.json é…ç½®æœ‰æ•ˆ
- [ ] æ•°æ®åº“å·²åˆå§‹åŒ–
- [ ] æµ‹è¯•æ•°æ®å·²å‡†å¤‡

### SessionStart Hook
- [ ] TC5.1.1: åŠ è½½æœ€è¿‘ä¼šè¯
- [ ] TC5.1.2: æ— æœ€è¿‘ä¼šè¯
- [ ] TC5.1.3: é¦–æ¬¡ä½¿ç”¨

### PreCompact Hook
- [ ] TC5.2.1: è‡ªåŠ¨å‹ç¼©è§¦å‘
- [ ] TC5.2.2: å‹ç¼©ç­–ç•¥éªŒè¯
- [ ] TC5.2.3: å‹ç¼©åæ¢å¤

### PostToolUse Hook
- [ ] TC5.3.1: Write æ“ä½œè‡ªåŠ¨ä¿å­˜
- [ ] TC5.3.2: Edit æ“ä½œè‡ªåŠ¨ä¿å­˜
- [ ] TC5.3.3: Git commit è‡ªåŠ¨ä¿å­˜
- [ ] TC5.3.4: çç¢æ“ä½œä¸ä¿å­˜
- [ ] TC5.3.5: æ‰¹é‡æ“ä½œé˜²é‡å¤ä¿å­˜

### Stop Hook
- [ ] TC5.4.1: æ­£å¸¸ä¼šè¯ç»“æŸ
- [ ] TC5.4.2: ä»»åŠ¡å®Œæˆå»ºè®®å½’æ¡£
- [ ] TC5.4.3: è®°å¿†è¿‡å¤§å»ºè®®æ•´ç†

### é›†æˆæµ‹è¯•
- [ ] åœºæ™¯ 1: å®Œæ•´å·¥ä½œæµ
- [ ] åœºæ™¯ 2: é•¿æ—¶é—´ä¼šè¯
- [ ] åœºæ™¯ 3: é”™è¯¯æ¢å¤

### æ€§èƒ½æµ‹è¯•
- [ ] æ‰€æœ‰ hooks åœ¨è¶…æ—¶æ—¶é—´å†…å®Œæˆ
- [ ] æ— æ˜æ˜¾æ€§èƒ½å½±å“
- [ ] å†…å­˜ä½¿ç”¨åˆç†

---

## æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# Hooks æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ä¿¡æ¯
- æµ‹è¯•æ—¥æœŸ: YYYY-MM-DD
- æµ‹è¯•ç¯å¢ƒ: macOS/Linux/Windows
- Claude Code ç‰ˆæœ¬: X.X.X
- æ’ä»¶ç‰ˆæœ¬: 0.1.0

## æµ‹è¯•ç»“æœ

### SessionStart Hook
- [ ] TC5.1.1: âœ…/âŒ
- [ ] TC5.1.2: âœ…/âŒ
- [ ] TC5.1.3: âœ…/âŒ

### PreCompact Hook
- [ ] TC5.2.1: âœ…/âŒ
- [ ] TC5.2.2: âœ…/âŒ
- [ ] TC5.2.3: âœ…/âŒ

### PostToolUse Hook
- [ ] TC5.3.1: âœ…/âŒ
- [ ] TC5.3.2: âœ…/âŒ
- [ ] TC5.3.3: âœ…/âŒ
- [ ] TC5.3.4: âœ…/âŒ
- [ ] TC5.3.5: âœ…/âŒ

### Stop Hook
- [ ] TC5.4.1: âœ…/âŒ
- [ ] TC5.4.2: âœ…/âŒ
- [ ] TC5.4.3: âœ…/âŒ

## å‘ç°çš„é—®é¢˜
1. [é—®é¢˜æè¿°]
2. [é—®é¢˜æè¿°]

## å»ºè®®æ”¹è¿›
1. [æ”¹è¿›å»ºè®®]
2. [æ”¹è¿›å»ºè®®]

## æ€»ç»“
[æµ‹è¯•æ€»ç»“]
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2026-01-30
**ç»´æŠ¤è€…**: Memory Manager Plugin Team
